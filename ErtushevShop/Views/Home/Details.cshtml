@model Product

@{
    ViewData["Title"] = $"Купить {Model.Brand} {Model.Model}";
}
<div class="container my-5">
    <div class="item row">
        <div class="col-md-6">
            <div class="position-relative">
                @if (!string.IsNullOrEmpty(Model.Image))
                {
                    <img src="@Model.Image" 
                         alt="@Model.Brand @Model.Model"
                         style="max-height: 500px; object-fit: contain;">
                }
                else
                {
                    <div class="bg-light text-muted d-flex justify-content-center align-items-center"
                         style="height: 500px; border-radius: 0.375rem;">
                        Изображение отсутствует
                    </div>
                }
            </div>
        </div>

        <div class="col-md-6">
            <h1 class="mb-3">@Model.Brand @Model.Model</h1>
            
            <p class="text-secondary fst-italic fs-5 mb-4">@Model.Category</p>


            <div class="mb-4">
                <span class="h4 text-primary">@string.Format("{0:C}", Model.Price)</span>
            </div>

            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <div class="mb-4">
                    <h5>Описание</h5>
                    <p>@Model.Description</p>
                </div>
            }

            <div class="d-flex gap-2 mb-4">
                <form class="add-to-cart-form" asp-action="AddToCart" method="post" onsubmit="showAddToCartToast()">
                    <input type="hidden" name="id" value="@Model.Id" />
                    <button type="submit"
                        class="btn btn-lg btn-outline-success"
                            onclick="handleAddToCart(this)">
                        <i class="bi bi-basket"></i> В корзину
                    </button>
                </form>
                <button type="button" 
                    class="btn btn-lg btn-outline-danger"
                    data-product-id="@Model.Id"
                    data-action="favorite"
                    onclick="toggleFavorite(this)">
                    <i class="bi bi-heart"></i> В избранное
                </button>
            </div>

            <a href="/" class="text-decoration-none">← Вернуться к каталогу</a>
        </div>
    </div>


    <div class="item row mt-5">
        <div class="col">
            <h3>Характеристики</h3>
            <table class="table table-borderless table-hover">
                <tbody>
                    <tr>
                        <th style="width: 20%;">Артикул</th>
                        <td>@Model.Id</td>
                    </tr>
                    <tr>
                        <th>Бренд</th>
                        <td>@Model.Brand</td>
                    </tr>
                    <tr>
                        <th>Модель</th>
                        <td>@Model.Model</td>
                    </tr>
                    <tr>
                        <th>Категория</th>
                        <td>@Model.Category</td>
                    </tr>

                    @if (Model is Cameras camera)
                    {
                        <tr><th>Размер сенсора</th><td>@camera.SensorSize</td></tr>
                        <tr><th>Выдержка</th><td>@camera.ShutterSpeed</td></tr>
                        <tr><th>Диафрагма</th><td>@camera.Aperture</td></tr>
                        <tr><th>Диапазон ISO</th><td>@camera.IsoRange</td></tr>
                        <tr><th>Разрешение фото</th><td>@camera.PhotoRes</td></tr>
                    }
                    else if (Model is ActionCameras actionCam)
                    {
                        <tr><th>Угол обзора</th><td>@actionCam.ViewAngle</td></tr>
                        <tr><th>Глубина погружения</th><td>@actionCam.Depth</td></tr>
                        <tr><th>Крепление</th><td>@actionCam.Fixation</td></tr>
                        <tr><th>Управление через приложение</th><td>@actionCam.AppManage</td></tr>
                        <tr><th>Диапазон ISO</th><td>@actionCam.IsoRange</td></tr>
                    }
                    else if (Model is Copters copter)
                    {
                        <tr><th>Скорость</th><td>@copter.Speed</td></tr>
                        <tr><th>Максимальная высота</th><td>@copter.Height</td></tr>
                        <tr><th>Время полёта</th><td>@copter.Duration</td></tr>
                        <tr><th>Управление через приложение</th><td>@copter.AppManage</td></tr>
                        <tr><th>Разрешение фото</th><td>@copter.PhotoRes</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

